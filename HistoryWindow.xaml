<Window x:Class="Calculator.HistoryWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="History" Height="520" Width="260"
        WindowStyle="None" ResizeMode="CanResize"
        AllowsTransparency="True" Background="Transparent"
        ShowInTaskbar="False">

    <Window.Resources>
        <Style x:Key="TitleBarButtonStyle" TargetType="Button">
            <Setter Property="Width" Value="36"/>
            <Setter Property="Height" Value="24"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#33FFFFFF"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#55FFFFFF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Border CornerRadius="16" Background="#2C2C2E" BorderBrush="#3A3A3C" BorderThickness="1" Padding="10">
        <Border.Effect>
            <DropShadowEffect BlurRadius="22" ShadowDepth="0" Opacity="0.35"/>
        </Border.Effect>

        <DockPanel LastChildFill="True">
            <!-- Transparent title bar with Close -->
            <Border Background="Transparent" Padding="6" DockPanel.Dock="Top">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="History" Foreground="White" FontSize="14" FontWeight="SemiBold"
                               VerticalAlignment="Center"/>
                    <Button Grid.Column="1" Style="{StaticResource TitleBarButtonStyle}"
                            Click="Close_Click" Content="X"/>
                </Grid>
            </Border>

            <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="0,0,0,6">
                <Button Content="Clear" Click="Clear_Click"
                        Height="24" Padding="8,0"
                        Background="#3A3A3C" Foreground="White"
                        BorderBrush="#5A5A5C" BorderThickness="1"
                        Cursor="Hand"/>
            </StackPanel>

            <ListBox x:Name="List"
                     Background="Transparent" BorderThickness="0"
                     Foreground="White" FontSize="12"
                     ScrollViewer.VerticalScrollBarVisibility="Auto">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Margin="0,2">
                            <TextBlock Text="{Binding Expression}" Opacity="0.8" FontSize="11"/>
                            <TextBlock Text="{Binding Result}" FontWeight="Bold" FontSize="12"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </DockPanel>
    </Border>
</Window>
